import{j as e}from"./header-BpO07gUl.js";import{r}from"./vendor-DbStWbRy.js";import{u as S,a as y,c as f,B as x,d as U,l as F,U as D,L as w,M as A,h as C,f as R,i as b}from"./index-DY3Nn9As.js";import"./footer-DRM0n1_S.js";const M=()=>{const o=S(),i=y(),{user:s}=f(a=>a.user),{error:l,isUpdated:n,loading:v}=f(a=>a.profile),[d,u]=r.useState(""),[c,m]=r.useState(""),[h,j]=r.useState(),[P,p]=r.useState("/Profile.png"),g=a=>{a.preventDefault();const t=new FormData;t.set("name",d),t.set("email",c),t.set("avatar",h),i(b(t))},E=a=>{const t=new FileReader;t.onload=()=>{t.readyState===2&&(p(t.result),j(t.result))},t.onerror=N=>{console.error("Error reading the file:",N)},t.readAsDataURL(a.target.files[0])};return r.useEffect(()=>{s&&(u(s.name),m(s.email),p(s&&s.avatar&&s.avatar.url)),l&&(x.error(l),i(U())),n&&(x.success("Profile Updated Successfully"),i(F()),o("/account"),i({type:D}))},[i,l,o,s,n]),e.jsx(r.Fragment,{children:v?e.jsx(w,{}):e.jsxs(r.Fragment,{children:[e.jsx(A,{title:"Update Profile"}),e.jsx("div",{className:"updateProfileContainer",children:e.jsxs("div",{className:"updateProfileBox",children:[e.jsx("h2",{className:"updateProfileHeading",children:"Update Profile"}),e.jsxs("form",{className:"updateProfileForm",encType:"multipart/form-data",onSubmit:g,children:[e.jsxs("div",{className:"updateProfileName",children:[e.jsx(C,{}),e.jsx("input",{type:"text",placeholder:"Name",required:!0,name:"name",value:d,onChange:a=>u(a.target.value)})]}),e.jsxs("div",{className:"updateProfileEmail",children:[e.jsx(R,{}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:c,onChange:a=>m(a.target.value)})]}),e.jsxs("p",{className:"para",children:["Image Size must be less than 1MB ",e.jsx("span",{children:"*"})]}),e.jsxs("div",{id:"updateProfileImage",children:[e.jsx("img",{src:P,loading:"lazy",alt:"Avatar Preview"}),e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:E})]}),e.jsx("input",{type:"submit",value:"Update",className:"updateProfileBtn"})]})]})})]})})};export{M as default};
