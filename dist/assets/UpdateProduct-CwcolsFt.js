import{j as e}from"./header-BpO07gUl.js";import{r}from"./vendor-DbStWbRy.js";import{b as z,u as A,a as $,c as I,F as q,B as p,z as N,G as O,M as H,H as L}from"./index-DY3Nn9As.js";import{d as G}from"./AccountTree-DgwPKKR6.js";import{d as W,a as J,b as K,c as Q}from"./AttachMoney-D09fuHrV.js";import{S as V}from"./Sidebar-DQqsPqq-.js";import"./footer-DRM0n1_S.js";const re=()=>{const{id:U}=z(),m=A(),o=$(),{error:d,product:a}=I(t=>t.productDetails),{loading:_,error:n,isUpdated:h}=I(t=>t.product),[x,g]=r.useState(""),[j,f]=r.useState(0),[v,P]=r.useState(""),[S,y]=r.useState(""),[b,C]=r.useState(0),[B,E]=r.useState([]),[F,D]=r.useState([]),[M,w]=r.useState([]),k=["Laptop","Footwear","Electronics","Watch","Attire","Camera","SmartPhones"],i=U;r.useEffect(()=>{a&&a._id!==i?o(q(i)):(g(a&&a.name),P(a&&a.description),f(a&&a.price),y(a&&a.category),C(a&&a.Stock),D(a&&a.images)),d&&(p.error(d),o(N())),n&&(p.error(n),o(N())),h&&(p.success("Product Updated Successfully"),m("/admin/products"),o({type:O}))},[o,d,m,h,i,a,n]);const R=t=>{t.preventDefault();const s=new FormData;s.set("name",x),s.set("price",j),s.set("description",v),s.set("category",S),s.set("Stock",b),B.forEach(u=>{s.append("images",u)}),o(L(i,s))},T=t=>{const s=Array.from(t.target.files);E([]),w([]),D([]),s.forEach(u=>{const c=new FileReader;c.onload=()=>{c.readyState===2&&(w(l=>[...l,c.result]),E(l=>[...l,c.result]))},c.readAsDataURL(u)})};return e.jsxs(r.Fragment,{children:[e.jsx(H,{title:"Create Product"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(V,{}),e.jsx("div",{className:"newProductContainer",children:e.jsxs("form",{className:"createProductForm",encType:"multipart/form-data",onSubmit:R,children:[e.jsx("h1",{children:"Update Product"}),e.jsxs("div",{children:[e.jsx(W,{}),e.jsx("input",{type:"text",placeholder:"Product Name",required:!0,value:x,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(J,{}),e.jsx("input",{type:"number",placeholder:"Price",required:!0,onChange:t=>f(t.target.value),value:j})]}),e.jsxs("div",{children:[e.jsx(K,{}),e.jsx("textarea",{placeholder:"Product Description",value:v,onChange:t=>P(t.target.value),cols:"30",rows:"1"})]}),e.jsxs("div",{children:[e.jsx(G,{}),e.jsxs("select",{value:S,onChange:t=>y(t.target.value),children:[e.jsx("option",{value:"",children:"Choose Category"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx(Q,{}),e.jsx("input",{type:"number",placeholder:"Stock",required:!0,onChange:t=>C(t.target.value),value:b})]}),e.jsxs("p",{className:"para",children:["Each Image Size must be less than 50kb ",e.jsx("span",{children:"*"})]}),e.jsx("div",{id:"createProductFormFile",children:e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:T,multiple:!0})}),e.jsx("div",{id:"createProductFormImage",children:F&&F.map((t,s)=>e.jsx("img",{src:t.url,loading:"lazy",alt:"Old Product Preview"},s))}),e.jsx("div",{id:"createProductFormImage",children:M.map((t,s)=>e.jsx("img",{src:t,loading:"lazy",alt:"Product Preview"},s))}),e.jsxs("button",{className:"MuiButtonBase-root MuiButton-root MuiButton-text",id:"createProductBtn",type:"submit",disabled:!!_,children:[e.jsx("span",{class:"MuiButton-label",children:"Update"}),e.jsx("span",{class:"MuiTouchRipple-root"})]})]})})]})]})};export{re as default};
